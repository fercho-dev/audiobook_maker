import pandas as pd
import io
from pydub import AudioSegment
from google.cloud import texttospeech


def get_text_for_speech(path_to_csv):
    df = pd.read_csv(path_to_csv)
    df.sort_values(by=['id'], ascending=True, inplace=True)
    df['best_score_label'] = df[['label_body_score',
                                 'label_other_score', 'label_header_score']].idxmax(axis=1)
    df = df[df['best_score_label'] != 'label_other_score']
    text_list = []
    text = ''
    for string in df.text.values:
        if len(text) > 4500:
            text_list.append(text)
            text = ''
        text += string

    return text_list


def make_speech_for_batch(text_list, language_code, voice_name, batch_name, bucket):
    """Synthesizes speech from the input string of text."""

    client = texttospeech.TextToSpeechClient()

    # Note: the voice can also be specified by name.
    # Names of voices can be retrieved with client.list_voices().
    voice = texttospeech.VoiceSelectionParams(
        language_code=language_code,
        name=voice_name
        # ssml_gender=texttospeech.SsmlVoiceGender.FEMALE,
    )

    audio_config = texttospeech.AudioConfig(
        audio_encoding=texttospeech.AudioEncoding.MP3,
        speaking_rate=0.8
    )

    # list of audio blobs in this batch
    audio_blobs_list = []
    text_number = 0
    for text in text_list:
        text_number += 1
        input_text = texttospeech.SynthesisInput(text=text)
        try:
            response = client.synthesize_speech(
                request={"input": input_text, "voice": voice,
                         "audio_config": audio_config}
            )
        except Exception as e:
            response = client.synthesize_speech(
                request={"input": input_text, "voice": voice,
                         "audio_config": audio_config}
            )
        # save audio in cloud storage
        blob_name = '{}-{}.mp3'.format(batch_name, text_number)
        mp3_blob = bucket.blob(blob_name)
        mp3_blob.upload_from_string(
            response.audio_content, content_type="audio/mpeg")
        audio_blobs_list.append(mp3_blob)

    # merge audio_blobs_list into a batch_audio_segment
    batch_audio_segment = None
    for audio_blob in audio_blobs_list:
        mp3_data = io.BytesIO(audio_blob.download_as_string())
        mp3_audio = AudioSegment.from_file(mp3_data, format="mp3")
        if batch_audio_segment:
            batch_audio_segment += mp3_audio
        else:
            batch_audio_segment = mp3_audio

        audio_blob.delete()

    return batch_audio_segment


def merge_batch_audios(batch_audio_segments, path_for_audio):
    # merge audio segments and save audio to
    final_audio = None
    for batch_audio in batch_audio_segments:
        if final_audio:
            final_audio += batch_audio
        else:
            final_audio = batch_audio

    final_audio.export(path_for_audio, format='mp3')

    # The response's audio_content is binary.
    # with open(path_for_audio, "wb") as out:
    #    out.write(response.audio_content)
    #    print('Audio content written to file {}'.format(path_for_audio))


if __name__ == "__main__":
    from bucket import create_bucket, return_bucket_object
    import time
    language_code = 'es-ES'
    voice_name = 'es-ES-Wavenet-B'
    path_for_audio = 'output.mp3'
    batch_texts = [['es la información de geolocalización (que también juega un rol esencial en otras de las categorías que aquípública que determinen acciones de intervención económica y de salud en beneficio de la población, y parauna mejor toma de decisiones individuales respecto a lugares u horarios de movilidad menos riesgosa.?Lo importante entonces es comprender para qué es útil esa información y en qué condiciones, 21 yaque, como revisaremos en los apartados siguientes, por sus mismas limitaciones técnicas, dicha informaciónpresenta más riesgos que beneficios si se pretende utilizar con otros fines, como el de trazabilidad de contactos o vigilancia de confinamiento.Clave resulta en esta materia que, en el último tiempo, las empresas que proveen servicios móviles han comenzado a desarrollar políticas orientadas a la responsabilidad empresarial por el respeto de losderechos humanos, principios y prácticas que precisamente apuntan a facilitar acceso a la información degeolocalización de sus servicios en una manera compatible al respeto de los derechos fundamentales, alserán reseñadas) como la trazabilidad de contactos, pasaportes de movilidad y vigilancia del confinamiento.mismo tiempo que sea útil al desarrollo de las políticas públicas. En el contexto COVID-19 se destaca la guíadesarrollada a este respecto por la Asociación Internacional de operadores móviles GSMA.22En nuestra región, casos problemáticos de intento de los estados de acceder a los datos en manos delos operadores de telecomunicaciones pueden ser encontrados en Colombia y Brasil. En el caso de Colombia,la Superintendencia de Industria y Comercio expidió la Circular Externa 001 del 23 de marzo de 2020 dondese autoriza a los operadores de telefonía al suministro de información al Departamento Nacional de Planeación y demás entidades estatales que la requieran para “atender, prevenir, tratar o controlar la propagacióndel COVID-19 (coronavirus) y mitigar sus efectos”.23 La justificación de esta medida a nivel local ha sido laentrega de ayuda económica del Estado frente a la emergencia.24 Organizaciones de la sociedad civil hanLos datos de geolocalización pueden ser obtenidos a través de información recolectada manualmente o aMaría José Hermosilla, Violencia y discriminación: ¿Qué gatilla la agresividad que muestran algunas personas en medio de la pandemia? Emol,23 de abril 2020, disponible en: <https://www.emol.com/noticias/Tendencias/2020/04/23/984027/Discriminacion-Coronavirus-Chile-Contagiados.html>Mana Azarmi & Andy Crawford, Use of Aggregated Location Information and COVID-19: What We\'ve Learned, Cautions about Data Use,and Guidance for Companies, Center for Democracy and Technology, 29 de mayo 2020, disponible en: <https://cdt.org/wp-content/uploads/2020/05/2020-05-29-Use-of-Aggregated-Location-Information-and-Covid-19.pdf>Caroline O. Buckee et al, Aggregated mobility data could help fight COVID-19, Science 145-146, 10 de abril, 2020, disponible en: <https://science.sciencemag.org/content/368/6487/145.2/tab-article-info>través de tecnologías de información. Mi dirección en un registro nacional de identidad es información queJoan López, Ingreso solidario: Un experimento del Estado para evitar discusión política sobre beneficios sociales por COVID 19, FundaciónKarisma, 26 de mayo 2020, disponible en: <https://web.karisma.org.co/ingresos-solidario-o-una-barrera-mas-para-la-exigibilidad-de-beneficios-sociales-en-tiempos-de-pandemia/>me geolocaliza en mi residencia habitual, pero la información del GPS de mi teléfono móvil o de las antenascelulares que facilitan su conexión lo hacen en tiempo real donde quiera que vaya.En contexto de pandemia, la geolocalización de individuos con COVID-19 les expone a riesgos directos de discriminación e incluso de violencia." Sin embargo, la información de geolocalización en formaagregada o anonimizada puede ser no solo útil, si no vital para una mejor toma de decisiones de políticarechazado esta circular, señalando que implica riesgos de discriminación, de vigilancia indebida, de invasiónde la privacidad y no contempla garantías mínimas frente al tratamiento de dicha información.25la información que se solicita por los gobiernos y se entrega a las autoridades en el contexto de pandemia.De la mano de los Principios Guía de Derechos Humanos y Empresas desarrollados por la ONU en 2011, lasempresas deben regirse en su actuar por tres ejes: “proteger, respetar y remediar”. Para la efectiva vigencia deese mandato resulta esencial la transparencia corporativa que cubra las acciones de las empresas de TICs, que',
                    'usan como insumo básico los datos de las personas.En los últimos años, algunas empresas de TICs han desarrollado la práctica de publicar informesde transparencia, que ha sido una herramienta útil para que los usuarios puedan entender los desafíos yamenazas en la protección de sus derechos. En contexto de pandemia, en el cual proliferan las solicitudes deacceso a datos de los usuarios de algunas de estas empresas, operadores de servicios móviles han comenzadoa desarrollar reportes específicos de transparencia.28 Resulta particularmente interesante saber qué caminoEn Brasil, la Corte Suprema suspendió una orden del gobierno que exigía a los operadores telefótomarán otras empresas de tecnología como Google29 o Facebook, 30 que a través de sus servicios y aplicaciones, recolectan abundante información de geolocalización, que también está siendo demandada o provistavoluntariamente a distintos gobiernos y comunidades científicas.Si se busca cooperación a través de la entrega de datos agregados por empresas de TICs a los estados,ello debiera realizarse bajo políticas de transparencia en que se les comunique a las usuarias por adelantadoqué datos agregados se está considerando entregar a la autoridad, además de abrir canales de diálogo quepermitan resolver dudas y cuestionamientos. La información provista al público debe ser suficiente para quese le permita comprender cuál es la utilidad de los datos que se están divulgando, cuáles son los resguardosOrganizaciones de la sociedad civil rechazan circular de la SIC sobre uso de datos personales para controlar la pandemia, disponible en: <https://web.karisma.org.co/organizaciones-de-la-sociedad-civil-rechazan-circular-de-la-sic-sobre-uso-de-datos-personales-para-controlar-la-pannicos compartir información personal de los clientes con la agencia de estadísticas del país, supuestamentedemia/>OAB ingressa no STF pela inconstitucionalidade da MP que promove quebra de sigilo de dados telefônicos, AOB, 20 DE ABRIL 2020, disponibleen: <https://www.oab.org.br/noticia/58071/oab-ingressa-no-stf-pela-inconstitucionalidade-da-mp-que-promove-quebra-de-sigilo-de-dados-telefonicosRafael Zanata y Mariana Marques Rielli., “Please do not share”: Brazilian Supreme Federal Court rules in favor of privacy, Access Now, 14 demayo 2020, disponible en: < https://www.accessnow.org/brazilian-supreme-federal-court-rules-in-favor-of-privacy/>Telia Company, freedom of expression and the right to privacy in times of covid-19 - up-dated information on related initiatives and governmentpara recopilar datos más completos durante la pandemia. Frente a la medida decretada administrativamenterequests. Up-date june Ist 2020, disponible en: <https://www.teliacompany.com/en/sustainability/responsible-business/freedom-of-expression/ #ts-section-74004>Karen Hao, How Facebook and Google are helping the CDC forecast coronavirus, MIT Technology Review, 9 de abril de 2020, disponible en:<https://www.technologyreview.com/2020/04/09/998924/facebook-and-google-share-data-to-forecast-coronavirus/>se alzaron voces ante la falta de proporcionalidad y transparencia respecto del uso de la información,26 locual fue confirmado en la decisión de la Corte Suprema que consideró la medida contraria a la protecciónconstitucional de los datos personales, apuntando específicamente a la falta de claridad del propósito de usode los datos a los que daba acceso la medida y de salvaguardas en su manejo. 27Resulta crucial lo que las empresas TICs sean capaces de ofrecer en materia de transparencia sobretomados para proteger la privacidad individual de las usuarias, a quién se entregará acceso a los datos y bajosa, para poder tomar acciones de salud respecto de tales contactos con el objeto de limitar los riesgos dequé resguardos de seguridad. Existe además una responsabilidad de las empresas de cautelar que los datosque continúe la transmisión de la enfermedad. Se trata de un método de larga data de aplicación para laepidemiologia, a través de contactos manuales realizados por notificadores humanos, mediante entrevistaspresenciales o telefónicas.Las apps de rastreo de contacto no son más que la tecnologización de la actividad de trazabilidadepidemiológica. Sin embargo, lo que hacen es precisamente separar la actividad de trazabilidad del contactohumano, que siempre ha sido esencial para el éxito de tales estrategias, pues descansan en el conocimiento yentrenamiento de personal de salud especializado y la posibilidad de entender contextualmente la informa',
                    ],
                   ["ción que entregan los entrevistados, para medir de forma más precisa su probabilidad de contagio.Las apps que se crean para generar notificaciones de exposición de contactos potenciales que puedensean representativos de todos los segmentos de la sociedad, o que, de no serlos, ello sea explicitado para eviresultar contagiados de COVID-19 sustituyen ese criterio humano con un algoritmo que define una puntuación de riesgo potencial, en base a variables tales como la distancia del contacto, el tiempo de la exposición,la reiteración del contacto y el tiempo transcurrido entre el diagnóstico y el momento de exposición delcontacto; en base a ese riesgo efectuan recomendaciones de acciones de salud para la usuaria, tales comomantenerse en cuarentena preventiva, realizarse un test, concurrir a un servicio de salud, entre otras.Hasta ahí el modelo parece bastante atractivo, pero si se analiza cada uno de los componentes anteriores es donde comienzan a apreciarse las limitaciones de estas tecnologías. Primero, para que sean realmente efectivas, se requiere una alta adopción por la ciudadanía; estudios científicos específicos indican queentre un 40% y un 60% de la población debe utilizarlas para que tengan impacto relevante en la estrategiasanitaria, 31 aún cuando tasas menores serían útiles en casos de que sean aplicadas en conjunto con otras estar que sean erróneamente utilizados con fines de toma de decisiones de políticas públicas que conduzcan atrategias tradicionales. 32 Esto de entrada resulta problemático, considerando la disponibilidad de conexiónde internet, teléfonos inteligentes y alfabetización digital entre sectores más vulnerables de la población enAmérica Latina y otros países menos desarrollados. ¿Tiene sentido inventir en un despliegue de esta tecnologia para cubrir solo a los sectores más privilegiados de la sociedad e invisibilizar a través de los datosLuca Ferretti, Chris Wymant, Michelle Kendall, Lele Zhao, Anel Nurtay, Lucie Abeler-Dörner, Michael Parker, David Bonsall, Christophe Fraser,Quantifying SARS-CoV-2 transmission suggests epidemic control with digital contact tracing, Science08, Mayo 2020, disponible en: <https://science.sciencemag.org/content/early/2020/03/30/science.abb6936/tab-pdf>Patrick Howell O'Neill, No, coronavirus apps don't need 60% adoption to be effective, MIT Technology Review, 5 de junio 2020, disponible en: <https://www.technologyreview.com/2020/06/05/1002775/covid-apps-effective-at-less-than-60-percent-download/>la marginalización adicional de la que hemos hablado.La mayor parte de los análisis y discusiones se han centrado en este limitado segmento de solucionestecnológicas. A esta altura es posible asumir un cierto grado de familiaridad de la audiencia con el conceptode trazabilidad de contactos, pero vale recordar que esta es una técnica que permite identificar los contactosestrechos de un individuo que ha sido diagnosticado como portador de una enfermedad infectocontagioSegundo, la tecnología que ha adquirido mayor aceptación hasta el momento para el desarrollo deAdemás, la tecnologia Bluetooth no está exenta de imprecisiones.37 Basta activarlo en tu teléfonopara que puedas detectar el móvil o los parlantes de tu vecino, aunque los separe un muro y no se hayan cruzado en lo que va de cuarentena. Entonces, aún esta tecnología arroja múltiples falsos positivos, que podríanterminar atochando los servicios de salud, así como múltiples falsos negativos, que pueden generar un efectoplacebo que resulte en un impacto perjudicial en la población, que confiando en el uso de la app terminenrelajando otras medidas más esenciales, como el distanciamiento social o el lavado de manos.Tercero, para el funcionamiento de estas apps es posible —aunque no necesario, recolectar unagran cantidad de información de sus usuarias, lo cual depende de su diseño y del compromiso con el respetoa la privacidad, y de su uso exclusivo con la finalidad de mitigación de la pandemia. Aquí es donde el tema seenreda considerablemente y ha sido pobremente manejado por quienes han estado promoviendo el uso deestas tecnologías en muchos países. El objetivo de estas apps debe limitarse a la identificación de posibilidaestas apps es la de Bluetooth,33-básicamente porque tanto el GPS34 como la información de las antenas celudes de contacto entre personas en riesgos de transmisión de COVID-19. Para eso no se necesita conocer laidentidad de las personas ni su ublicación.La OMS desarrolló un trabajo en esta materia con un comité multidisciplinario de expertos, con los",
                    'cuales elaboró una guía de principios éticos, consideraciones técnicas y requisitos que son consistentes conestos principios para lograr el uso equitativo y apropiado de estas tecnologías con el propósito de informar alos programas de salud pública y a los gobiernos que están considerando desarrollar o implementar tecnologíasdigitales de trazabilidad para el seguimiento de contactos COVID-19.38Tales principios resultan útiles y orientadores para la toma de decisiones y fueron elaborados tenienlares carece de precisión para medir contactos de menos de dos metros, que es la distancia relevante para laVer Privacy International, Bluetooth tracking and COVID-19: A tech primer, 31 de marzo 2020, disponible en: <https://www.privacyinternational.org/explainer/3536/bluetooth-tracking-and-covid-19-tech-primer>National Coordination Office for Space-Based Positioning, Navigation, and Timing, Official U.S. government information about the GlobalPositioning System (GPS) and related topics, GPS Accuracy, 22 de abril 2020, disponible en: <https://www.gps.gov/systems/gps/performance/accuracy/>Jay Stanley & Jennifer Stisa Granick, The Limits of Location Tracking in an Epidemic, ACLU, 8 de abril, 2020, disponible en: <https://www.aclu.org/sites/default/files/field_document/limits_of_location_tracking_in_an_epidemic.pdf>Alberto García, No todos los móviles tienen el mismo Bluetooth 5: cómo diferenciarlo, ADSLZone, 1 de abril 2020, disponible en: <https://www.transmisión de COVID-19.95 Específicamente, el protocolo Bluetooth de baja energia (BLE) es el que ha sidoadslzone.net/2019/04/01/bluetooth-5-funciones-opcionales-diferencias/>Douglas J. Leith & Stephen Farrell, Coronavirus Contact Tracing: Evaluating ThePotential Of Using Bluetooth Received Signal Strength For Proximity Detection, School of Computer Science & Statistics, Trinity College Dublin, Ireland, 6 de Mayo 2020, disponible en: <https://www.scss.tcd.ie/Doug.Leith/pubs/bluetooth_rssi_study.pdf>World Health Organization, Ethical considerations to guide the use of digital proximity tracking technologies for COVID-19 contact tracing, 28 demayo 2020, disponible en: <https://apps.who.int/iris/bitstream/handle/10665/332200/WHO-2019-nCoV-Ethics_Contact_tracing_apps2020.1-eng.pdf>consideradopara el desarrollo de las soluciones de trazabilidad de contactos por su precisión y ahorro deenergía, pero se debe tener en consideración que, a pesar de haber sido desarrollado desde 2010, la versión5.0 que cuenta con mayor alcance de señal solo se encuentra presente en los teléfonos inteligentes más modernos, fabricados desde 2017 en adelante.36do a la vista las diferentes alternativas técnicas disponibles hasta ahora, de acuerdo a los distintos proyectostécnicos que, contra reloj, se han desarrollado alrededor del mundo para responder a los desafíos de la panusuarios (en los sistemas descentralizados) cuando una usuaria recibe un diagnóstico positivo.Los elementos esenciales de estos sistemas son: (i) dispsitivos en poder de las usuarias que generan yalmanencan identificadores aleatorios efímeros; (ii) un operador de servicios back-end que permite la comunicación entre dispositivos y la confirmación de casos de infección a través de comunicaciones cifradas (en elcasos de los modelos centralizados una autoridad juega este rol y provee más que solo back-end, adicionandoalmacenamiento y filtrado de información); y, (iii) una app que permite la comunicación con las usuarias.Usualmente se concibe que sea una autoridad quien esté a cargo de este componente, de modo de hacer queeste se incerte en las capacidades de respuesta de la pandemia, permita la calibración del riesgo computadoy de las recomendaciones de salud realizadas conforme a este.Revisemos brevemente las variantes de protocolos de trazabilidad de contactos o notificaciones dedemia. Pasemos a examinar brevemente esas diferentes alternativas técnicas desde una perspectiva crítica.exposición basadas en el uso de BLE que han sido propuestas, con un énfasis particular en el debate de los beneficios y riesgos de las soluciones descentralizadas, centralizadas o mixtas, así como la discusión creciente acercade la interoperabilidad como condición esencial de su éxito y contribución a la mitigación de la pandemia.Sin ánimo exhaustivo, a la fecha los principales protocolos descentralizados que han adquiridonotoriedad en la búsqueda de sistemas de notificación de exposición son: DP3T,39 desarrollado por unconsorcio de académicos europeos; PACT,40 desarrollado por un consorcio de académicos de los Esta',
                    ],
                   ['dos Unidos; la interfaz de aplicación (API) desarrollada en forma conjunta por Apple y Google, 41 desarrollada como un esfuerzo de interoperabilidad de las gigantes tecnológicas; y TCN Protocol,42 tambiéndesarrollada en los Estados Unidos por una coalición de expertos en seguridad. Los componentes básicos de todas estas soluciones son los mismos ya descritos y todas operan de forma descentralizada, esComo hemos visto ya, además de su mayor granularidad comparado con las tecnologías de GPSdecir que el almacenamiento de los identificadores efímeros se produce a nivel local en los dispositivosy, en caso de diagnóstico de infección, los identificadores del infectado son transmitidos para que losdispositivos de quienes hayan estado expuestos a un contacto con el dispositivo del paciente diagnosticado puedan reconocerlo y, conforme al riesgo computado, generar una notificación a su titular.Carmela Troncoso et al. Decentralized Privacy Preserving Proximity Tracing. 25 de mayo 2020, disponible en: <https://arxiv.org/ftp/arxiv/papers/2005/2005.12273.pdf>Justin Chan et al. PACT: Privacy-Sensitive Protocols And Mechanisms for Mobile Contact Tracing, 7 de mayo 2020, disponible en: <https://arxiv.org/pdf/2004.03544.pdf>y antenas móviles, los protocolos desarrollados sobre la base de la tecnología BLE —como los utilizadosen Singapur, Australia, la interfaz desarrollada por Apple/Google y varios de los propuestos en Europaconsiguen con mayor claridad objetivos de protección de la privacidad pues no recolectan información delocalización, ni la identidad de las personas que usan la app que los conecta a las usuarias. Lo que hacen espermitir recolectar identificadores que se crean en forma aleatoria y se almacenan temporal y localmente enlos dispositivos, y solo se comunican a la autoridad de salud (en los sistemas centralizados) o a los demásLas ventajas principales de estos sistemas descentralizados son la minimización de información reTodas las soluciones descentralizadas requieren de una interfaz a las usuarias a través de una app quecolectada (exclusivamente los identificadores efímeros, pero no localización, ni otra información que perse comunique con ellas. En el caso de la solución provista por Apple/Google, las empresas han optado por nohacerse cargo de esta componente del sistema, dejando a las autoridades locales la responsabilidad de talesdesarrollos. Esta opción abre la puerta a que las implementaciones de gobiernos locales puedan incorporaren sus apps otros requerimientos de recogida de información que excedan el diseño y las características depreservación de la privacidad presentado por el modelo hasta aquí explicado.Aun cuando Apple/Google presentan términos y condiciones de uso de su AP14 que pretenden blindar el uso de esta tecnología de formas no alineadas con la protección de la privacidad -particularmente,exigen uso voluntario, no utilización para otros propósitos, prohíben un uso discriminatorio, establecen unaimposibilidad técnica de acceder a la localización de los dispositivos y de acceder automáticamente a agendamita identificar a las usuarias) lo que previene abusos de la autoridad a través del usos de datos para finesde contactos—, restará ver cuál será la adhesión efectiva de las autoridades locales a tales condiciones, asícomo cuál será la conducta de las empresas para asegurar el respeto por tales condiciones cuando comiencena desplegarse la implementación de aplicaciones bajo esta tecnología.44Entre los protocolos centralizados que se han desplegado a la fecha, el de mayor notoriedad es BlueTrace45 adoptado por Australia (CovidSafe) y Singapur (TraceTogether), basado también en la recogida deseñales BLE, pero con registro y almacenamiento centralizado por la autoridad de salud de los identificadores asociados a un número de teléfono. Un elemento interesante de los modelos centralizados como estees que permiten combinar la información de la app con aquella obtenida de las entrevistas desarrolladas através de la identificación manual de contactos.El protocolo funciona de la siguiente manera: las usuarias transmiten identificaciones de aspectodistintos de los de salud; almacenamiento localizado y temporal en el dispositivo por alrededor de 15 días,aleatorio y recopilan identificaciones en su proximidad. Luego, al recibir un diagnóstico positivo, la usuariainforma a la autoridad todas las identificaciones recopiladas en su proximidad durante la ventana de infección pertinente. La autoridad entonces alerta a las usuarias que generaron estas identificaciones. Se utiliza',
                    'un sistemacifrado simétrico para las iden icaciones temporales, cuya llave se encuentra exclu menteVer GoogleCOVID-19Exposure Notications ServiceAdditional terms, 4 de mayo 2020, disponible en: <https://blog.google/documents/72/Exposure_Notifications_Service_Additional_Terms.pdf>Al momento de escribir este documento Alemania, Austria, Italia, Grecia, Portugal y Suiza se encontraban evaluando posibilidades de implementación. En América Latina se ha hecho mención de de Uruguay como potencial lugar de implementación.de acuerdo a la relevancia epidemiológica determinada hasta hoy, con lo cual se previene la posibilidad deJason Bag, Joel Kek, Alvin Tan, Chai Sheng Hau, Lai Yongquan, Janice Tan, Tang Anh Qug, BlueTrace: Aprivacy-preserving protocol for Community-driven contact tracing across borders, Government Technology Agency of Singapore, 9 de abril 2020, disponible en: <https://bluetrace.io/>monitoreo malicioso de personas infectadas; y que el sistema asegura su desmantelamiento automático puesno existen datos almacenados centralmente, con cual, si deja de haber infectados, dejará de existir información disponible que alimente al sistema. Sobre este último punto, resulta necesario llamar la atención aque, de acuerdo con lo informado por las empresas, la API ofrecida por Apple/Google permite una deshabilitación regional de su funcionalidad por diseño.en poder de la autoridad. La usuaria puede revocar en cualquier momento su consentimiento, eliminando sunúmero del registro y, con ello, la posibilidad de asociar los identificadores efímeros generados a su identidad.ROBERT es otro protocolo centralizado en base a BLE desarrollado en Francia, bajo la premisa deque, además de tratarse de una solución tecnológica que preserve la privacidad, debe tratarse de una que permita controlar las posibilidades de ataques externos al sistema, que disminuyan su estabilidad y la confianzaen este. Se presentó como una alternativa crítica de los inconvenientes de seguridad por ataques externos,principal debilidad de los sistemas descentralizados antes examinados, ya que pueden generarse artificialmente e inyectarse al sistema identificaciones efímeras con la finalidad de hacer que un grupo específico deindividuos parezca en riesgo de exposición y sea masivamente notificado (denominado riesgo de “ataqueterrorista”).48 El protocolo se basa en un esquema que combina una infraestructura de servidor federado eidentificadores anónimos temporales, con el control y administración de los puntajes de riesgo y las notificaciones por el servidor de la autoridad de salud, lo que conforme a sus autores proporciona alta robustez,Open Trace es la versión código abierto de la aplicación TraceTogether, originalmente lanzada porflexibilidad y eficacia.49Presentado como una evolución de ROBERT, el protocolo mixto DESIRE,5° desarrollado en colaboraciónpor académicos franceses y alemanes, descentraliza la mayoría de las operaciones necesaria en el sistema de notificación de exposición. La principal diferencia con ROBERT es que se crean tokens de encuentroprivado (PET) secretos y generados criptográficamente, para codificar encuentros. La función del servidor essimplemente hacer coincidir los PET generados por los usuarios diagnosticados con los PET proporcionadospor los usuarios solicitantes, información que se almacena cifrada en el servidor, pero controlada porllavesalmacenadas en los dispositivos (criptografía asimétrica). Esta mejora se plantea con la finalidad de generarSingapur, y que fue una de las primeras en desplegarse y encender el debate acerca del uso de aplicacionesuna mejor protección contra usuarios y autoridad maliciosos. Sin embargo, como en ROBERT, los puntajesde riesgo y las notificaciones aún son administradas y controladas por el servidor bajo control de la autoridadde salud.Por último, aunque no se trata de protocolos técnicos en sí, si no de la combinación de uso de disMalgorzata Fraser, Coronavirus contact tracing reignites Polish privacy debate, DW, 30 de mayo 2020, disponible en: <https://www.dw.com/en/coronavirus-contact-tracing-reignites-polish-privacy-debate/a-53600913>Douglas J. Leith & Stephen Farrell, Coronavirus Contact Tracing App Privacy: WhatData Is Shared By The Singapore OpenTrace App?, School ofComputer Science & Statistics, Trinity College Dublin, Ireland, 28 de abril 2020, disponible en: <https://www.scss.tcd.ie/Doug.Leith/pubs/opentrace_privacy.pdf>móvilesVer Ross Anderson, Contact Tracing in the Real World, 12 de abril 2020, Light Blue Touchpaper, disponible en: <https://www.lightbluetouchpaper.',
                    "org/2020/04/12/contact-tracing-in-the-real-world/>PRIVATICS team, ROBERT: ROBust and privacy-presERving proximity Tracing, 19 de abril, 2020, disponible en: <https://github.com/ROBERT-proximity-tracing/documents/blob/master/ROBERT-specification-EN-v1_0.pdf>Claude Castelluccia, Natalija Bielova, Antoine Boutet, Mathieu Cunche, Cédric Lauradoux, et al. DESIRE: A Third Way for a European ExposureNotification System Leveraging the best of centralizedand decentralized systems, 12 de mayo 2020, disponible en: <https://hal.inria.fr/hal02570382/file/DESIRE-specification-EN-vi_0.pdf>la trazabilidad de contactos. Polonia está entre los países que han implementado este protocoloa través de su ProteGO Safe app.46 Un estudio técnico reciente muestra que la aplicación funciona utilizandolos servicios Firebase Analytics provistos por Google, lo que posibilita que dicha empresa tenga acceso a lainformación individualizada de los usuarios, aunque solo sea compartida en forma agregada a la autoridad.47tintas tecnologías y fuentes de información, vale la pena destacar el caso de las soluciones desarrolladas enciones de salud pública.51India, Corea del Sur y Nueva Zelandia. Aarogya Setu es la app implementada en forma obligatoria paraEn Corea del Sur se ha implementado una app que usa la información de antenas de telefonía móvilpara el rastreo de contactos y potenciar la trazabilidad tradicional a través de entrevistas. La autoridad combina datos de ubicación de teléfonos móviles, registros de transacciones de tarjetas de crédito y grabacionesde circuito cerrado de televisión para rastrear y evaluar a las personas que podrían haber entrado recientemente en contacto con una persona infectada. Lo anterior ha ido acompañado de la publicación de mapasdetallados que muestran movimientos precisos de personas infectadas, alentando a otros que podrían haberestado en contacto con ellos a realizarse exámenes, pero también ocasionando graves consecuencias socialespor el riesgo de re-identificación de las personas contagiadas.52Nueva Zelandia ha adoptado una aproximación interesante basada en el principio de amplificaracceder a los lugares de trabajo en India. La app utiliza señales de Bluetooth para registrar contactos en lala capacidad de trazadores humanos trabajando para el sistema de salud. Para ello, mezcla elementos de latecnología QR implementada en China, pero sin que la información se almacene centralizadamente, si noen forma local en los dispositivos de las usuarias, como un registro de cada uno de los establecimientos quela usuaria visita en los cuales deberá escanear código QR. En caso de determinarse una infección, la información de lugares visitados será requerida por personal de salud para hacer el cruce con el registro de usuarias disponible en los establecimientos que aparezcan en el registro. Notablemente, el gobierno neozelandésacompañó el lanzamiento de su app de una evaluación de impacto en privacidad y anuncia que este será unproceso constante durante le despliegue de dicha tecnología.53Como puede concluirse de esta muy apretada revisión, todas las alternativas técnicas disponiblescuentan con riesgos en su operación necesarios de calibrar a la hora de desarrollar su implementación, yforma antes descrita, pero además utiliza datos de ubicación GPS para aumentar la información recopiladaaunque las soluciones descentralizadas han ido acompañadas de un mayor consenso técnico por su características de preservación de privacidad y limitación de posibilidad de desvío de uso de la autoridad, ellas noson inmunes a riesgos de seguridad si se trata de analizar ataques de mayor sofisticación. Así también, sueficiencia dependerá la configuración del algoritmo encargado de determinar el riesgo de infección, queSankalp Phartiyal, India follows China's lead to widen use of coronavirus tracing app, Reuters, 14 de mayo 2020, disponible en: <https://www.reuters.com/article/us-health-coronavirus-india-app/india-follows-chinas-lead-to-widen-use-of-coronavirus-tracing-app-idUSKBN220110>BBC, Coronavirus privacy: Are South Korea's alerts too revealing?, BBC News, 5 de marzo 2020, disponible en: <https://www.bbc.com/news/world-asia-51733145>y construir una base de datos centralizada de la propagación de la infección, un enfoque que la mayoría deMinistry of Health of New Zeland, COVID-19 Contact Tracing Application, Privacy Impact Assessment, 15 de mayo 2020, disponible en: <https://www.health.govt.nz/system/files/documents/pages/nz_covid_tracer_pia_18_may_2020.pdf>",
                    'los países evita por razones de privacidad. También imita el sistema de código QR de salud de China -queexaminaremos luego, con una función que califica el estado de salud probable de una persona con coloresverde, naranja o rojo para indicar si una persona está segura, en alto riesgo o es portadora del virus. Pordisposición administrativas del Ministerio de Tecnología de India, la agencia gubernamental que desarrollóla app es libre de compartir datos personales de la aplicación con otras agencias gubernamentales e instituFinalmente, la interoperabilidad de soluciones es un componente que se ha levantado como esencial deSin embargo, coincidimos en que la interoperabilidad será la prueba final de eficacia que esta tecnología de trazabilidad de contactos deberá enfrentar de cara a un mundo que intente reactivarse y alcanzar sutan ansiada nueva normalidad.Los pasaportes de inmunidad buscan generar un grado de certeza que permita la circulación de lapoblación y la reactivación de las actividades económicas y sociales. Su emisión depende de la existencia demétodos de medición de los grados de inmunidad desarrollada por la población frente a una enfermedadinfectocontagiosa. Su objetivo es precisamente discriminar entre aquellos que cuentan con inmunidad yquienes carecen de ella, asignando consecuencias de movilidad y oportunidades de empleo a esa clasificación. Así, buscan imponer una restricción artificial sobre quién puede participar en actividades sociales ycara al progresivo levantamiento de medidas restrictivas de cruce de fronteras y a la proliferación de distintaseconómicas, y quién no.Es por ello que los expertos llaman la atención acerca del riesgo de que los pasaportes de inmunidadcreen un incentivo perverso para que las personas busquen infectarse, especialmente las más vulnerables,que no pueden permitirse un período de exclusión de la fuerza laboral, agravando las desigualdades sociales preexistentes.56 Las situaciones de corrupción o debilidad institucional en América Latina y otros paísesmenos desarrollados pueden ocasionar que este tipo de herramientas profundicen el daño en el ejercicio dederechos económicos y sociales sufrido a causa de la COVID-19 por las poblaciones más vulnerables.China fue el primer país en implementar este tipo de herramientas en el contexto de la pandemia,a través de un sistema codificado de colores tipo semáforo, asociado a un código QR que se vincula a laidentidad de cada persona y permite regular la movilidad en espacios públicos. Contar con un código verdees exigido para habilitar el viaje entre provincias, y los establecimientos y servicios de atención a públicosoluciones tecnológicas, incluso dentro de un mismo país o región. En Europa, los estados parte de la eHealthpueden condicionar el acceso a las personas a contar con un código verde. No existe transparencia respectode los factores de riesgo y la ponderación que determina la asignación de los colores. Además de almacenareHealth Network, Interoperability guidelines for approved contact tracing mobile applications in the EU, 13 de mayo 2020, disponible en:<http://ec.europa.eu/health/sites/health/files/ehealth/docs/contacttracing_mobileapps_guidelines_en.pdf>Ulrich Luckas et al. Interoperability of decentralized proximity tracing systems across regions, 15 de mayo 2020, disponible en: <https://drive.google.com/file/d/ImGFEZIMKNmc51TG4ceE9PHEggN8rHOXk/edit>Alexandra L Phelan, COVID-19 immunity passports and vaccination certificates: scientific, equitable, and legal challenges, The Lancet Vol 395, 23Nework han relevado la necesidad de interoperabilidad dentro de la región, 54 y un grupo de expertos trabajande mayo, 2020, disponible en: <https://www.thelancet.com/action/showPdf?pii=S0140-6736%2820%2931034-5>do en diferentes protocolos descentralizados han comenzado a explorar las alternativas técnicas para alcanzardicha interoperabilidad.55 Discusiones de soberanía tecnológica se mezclan en la combinación de las diferentessoluciones propuestas, incluyendo la conveniencia de descasar en la tecnología provista por los gigantes Americanos Apple/Google, y la proliferación de protocolos, tanto para soluciones centralizadas como descentralizadas y mixtas agrega complejidad adicional a la posibilidad de alcanzar la interoperabilidad.información de movilidad, la aplicación registra información de salud declarada por el paciente y su fichael gobierno esté tratando de establecer un sistema de vigilancia y control más completo en nombre de la'
                    ],
                   ]
    batch_names = ['prueba_1_batch', 'prueba_2_batch', 'prueba_3_batch']
    project_id = 'audiobook-maker-297701'
    bucket_name_mp3 = '{}-mp3'.format(project_id)
    create_bucket(bucket_name_mp3)
    time.sleep(1)
    bucket_mp3 = return_bucket_object(bucket_name_mp3)
    batch_audio_segments = []
    for batch_text, batch_name in zip(batch_texts, batch_names):
        audio_segment = make_speech_for_batch(batch_text, language_code,
                                              voice_name, batch_name, bucket_mp3)
        batch_audio_segments.append(audio_segment)

    merge_batch_audios(batch_audio_segments, path_for_audio)
